<! DOCTYPE html>
<html>
<head>
 <meta charset="UTF-8">
 <title>Виселица!</title>
 <body>
  <h1>Виселица!</h1>

  <script>
 var words = [
 "программа",
 "макака",
 "прекрасный",
 "оладушек",
 "мама",
 "игра",
 "настоящий",
 "любовь",
 "здание",
 "молодость",
 "висельница",
 "дом",
 "уют",
 "кот",
 "слово",
 "интерес",
 "жизнь",
 "море",
 "солнце",
 "обезьяна",
 "кролик",
 "красота",
 "мозг",
 "йод",
 "ошибка",
 "сок",
 "персик",
 "банан",
 "молоко",
 "йогурт",
 "дочь"
 ];
 var times = 0;
 var loose = 21;
 function pickWord () {
  return words[Math.floor(Math.random() * words.length)];
    }
var word = pickWord();
function setupAnswerArray (word){
   var array = [];
for (let i = 0; i < word.length; i++)
 {
  array[i] = "_";
}
return array;
}
var answerArray = setupAnswerArray(word);
var remainingLetters = word.length;
function showPlayerProgress (answerArray){
times++;
loose--;
return alert("Осталось попыток: " + loose + ". Загаданное слово: " + answerArray.join(" "));
}
while (remainingLetters > 0 && times < 20) {
 showPlayerProgress(answerArray);
function getGuess (){
  return prompt("Угадайте букву, или нажмите Отмена для выхода из игры.");
 }
var guess = getGuess();
 guess = guess.toLowerCase();
 if (guess === null) {
 break;
 } else if (guess.length !== 1) {
 alert("Пожалуйста, введите одиночную букву.");
 } else {
function updateGameState (guess, word, answerArray){
   var letters = 0;
for (let j = 0; j < word.length; j++) {
 if (word[j] === guess && answerArray[j] === ("_")) {
 answerArray[j] = guess;
 letters++;
 } 
 }
 return letters;
}
}
 var correctGuesses = updateGameState(guess, word, answerArray);
 remainingLetters -= correctGuesses;
}
function showAnswerAndCongratulatePlayer (answerArray){
   if (times >= 20) {
    alert("Упс, Вы проиграли.");
}
 else {
    alert(answerArray.join(" "));
 alert("Отлично! Было загадано слово " + word);
 }
}
showAnswerAndCongratulatePlayer(answerArray);

 </script>
</body>
</html>